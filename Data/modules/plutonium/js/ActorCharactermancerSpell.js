function _0x48db(_0x51b6ad,_0x3ed23e){const _0x327e58=_0x327e();return _0x48db=function(_0x48db28,_0x59db8a){_0x48db28=_0x48db28-0x135;let _0x164840=_0x327e58[_0x48db28];return _0x164840;},_0x48db(_0x51b6ad,_0x3ed23e);}const _0x149045=_0x48db;(function(_0x2ca0e2,_0x219c0d){const _0x279cee=_0x48db,_0x33a216=_0x2ca0e2();while(!![]){try{const _0x4e8120=parseInt(_0x279cee(0x1c5))/0x1+parseInt(_0x279cee(0x189))/0x2*(-parseInt(_0x279cee(0x136))/0x3)+-parseInt(_0x279cee(0x1e1))/0x4+parseInt(_0x279cee(0x16f))/0x5+parseInt(_0x279cee(0x1b6))/0x6+-parseInt(_0x279cee(0x185))/0x7*(-parseInt(_0x279cee(0x14d))/0x8)+parseInt(_0x279cee(0x1d8))/0x9;if(_0x4e8120===_0x219c0d)break;else _0x33a216['push'](_0x33a216['shift']());}catch(_0x1d210a){_0x33a216['push'](_0x33a216['shift']());}}}(_0x327e,0xbdabe));import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';function _0x327e(){const _0x2119f7=['_changeSubclassTable','getRace_','constructor','compsSpellAdditionalSpellClass','getCleanSearchTerm','filterBoxSpells','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22\x20title=\x22Include\x20spell\x20lists\x20defined\x20in\x20Unearthed\x20Arcana,\x20Plane\x20Shift,\x20and\x20other\x20semi-official\x20products\x20when\x20generating\x20the\x20list\x20of\x20spells\x20which\x20can\x20be\x20learned/prepared.\x22>Include\x20UA/etc.\x20Spell\x20Lists</button>','addHookAlwaysKnownSpells','text','_tabSpells','<div\x20class=\x22bold\x20mb-2\x22>Subclass\x20Spells\x20(','class_ixMax','filter','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','subclassSource','alwaysPreparedSpellsClass','184VvcvKz','_compSpellAdditionalSpellRace','_parent','spellsAlwaysKnown','compAbility','CASTER_TYPE_TO_PROGRESSION','<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>','compRace','<div\x20class=\x22bold\x20mb-2\x22>Class\x20Spells\x20(','curLevel','getExistingClassTotalLevels_','_hk_onChangeSubclass_pRenderSpellTable','subclassShortName','_filterValuesSpellsCache','_getDefaultState','class_totalLevels','getTotals','_spell_pRenderFilterBox','click','forEach','compSpellAdditionalSpellBackground','_hk_shared_doInitClassSubclass','maxPrepared','_hk_onChangeClass','parent','getMaxCasterProgression','classSpells','info','hideVe','expandedSpellsClass','trimState','class_getProps','cantripProgression','isAnyCantrips','3089430OlQmGj','[‒]','prepared','exec','[+]','_modalFilterSpells','maxLearnedCantrips','level','_spell_renderRaceBackgroundSection','_unlock','spellLevelHigh','alwaysPreparedSpellsBackground','_spell_isClassCaster','targetLevel','alwaysPreparedSpellsRace','_data','class','copy','expandedSpellsSubclass','spells_isIncludeUaEtcSpellLists','subclassSpells','_compSpellAdditionalSpellBackground','88571vWWtkm','_pageFilterSpells','state','mutateAndAddToFilters','6WEqBer','ActorCharactermancer.spells_page','expanded','_compsSpellSpellSlotLevelSelect','max','_hk_shared_doRenderClassSubclass','<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>','appendTo','_hk_onChangeSubclass','class_pulseChange','getValues','getFormData','ixClass','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','_compsSpellAdditionalSpellSubclass','handleSearch','_compsSpellAdditionalSpellClass','addHookAbilityScores','shortName','_lastSearchTermSpells','spellsExpanded','pLoad','_spell_renderRaceSection','background_pulseBackground','_state','source','casterProgression','_compBackground','getFeatureCustomizedBackground_','_actor','keys','<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x20h-initial\x22\x20placeholder=\x22Find\x20spell...\x22>','pPreloadHidden','addHookAlwaysPreparedSpells','alwaysKnownSpellsClass','addHookPulseFixedLearnedProgression','actor','subclassName','class_getMinMaxSpellLevel','empty','pInitFilterBox','_hk_onChangeSubclass_pRenderSpellTable_','spellSlotLevelSelection','getExistingCasterMeta','getSubclass_','3744408uBvFEf','_spell_getFixedLearnedProgression','_spell_getLocks','_pLock','_spell_getExistingCasterMeta','getCasterProgressionMeta','compsSpellSpellSlotLevelSelect','compSpellAdditionalSpellRace','handleFilterChange','spellsKnownProgression','keyup','pGetDereferencedClassData','data','addHookExpandedSpells','fixedLearnedProgression','803724jrWETs','append','addHookBase','bind','some','getFixedLearnedProgression','innate','getClass_','toggleVe','_spell_handleFilterChange','spell_','_spell_getMaxPreparedSpells','filterBox','spellsKnownProgressionFixedAllowLowerLevel','fixedLearnedProgressionDefault','isIncludeUaEtcSpellLists','_spell_renderClassSection','alwaysKnownSpellsBackground','_spell_isCasterClassAtLevel_cantrips','1565460bXwVll','compClass','render','filterValuesSpellsCache','spellsAlwaysPrepared','<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>','val','alwaysKnownSpellsSubclass','_spell_isCasterClassAtLevel_additionalSpells','5407264vnEcuU','_hk_shared_doUpdateRenderedClassSubclass','_hk_onChangeAbilityScores','bindTypingEnd','alwaysPreparedSpellsSubclass','showVe','additionalSpells','expandedSpellsRace','spellLevelLow','_compsSpellSpells','_spell_isCasterClassAtLevel_additionalSpellsBlock','compsSpellSpells','ActorCharactermancer.spells','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20mr-1\x22\x20title=\x22Save\x20a\x20copy\x20of\x20the\x20current\x20filters,\x20to\x20use\x20when\x20filtering\x20spell\x20lists\x20during\x20import\x20of\x20&quot;prepared\x20spell&quot;\x20casters.\x20For\x20example,\x20if\x20you\x20want\x20your\x20Cleric\x27s\x20spell\x20list\x20to\x20include\x20only\x20PHB\x20spells,\x20you\x20would\x20filter\x20(using\x20the\x20interface\x20above)\x20for\x20PHB\x20spells,\x20then\x20click\x20this\x20button.\x20Note\x20that\x20all\x20the\x20spells\x20that\x20you\x20have\x20selected\x20as\x20learned\x20or\x20that\x20you\x20have\x20selected\x20as\x20prepared\x20will\x20be\x20imported\x20regardless.\x22>Set\x20Prepared\x20Spell\x20Filter</button>','_hk_onChangeLevel','_spell_renderBackgroundSection','_spell_isCasterClassAtLevel','spellsKnownProgressionFixed','spell','381927mvsEhG','_hk_shared_doCleanupClassSubclass',')</div>','_compRace','compBackground','expandedSpellsBackground','name'];_0x327e=function(){return _0x2119f7;};return _0x327e();}import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';import{Charactermancer_Spell_SlotLevelSelect,Charactermancer_Spell_Util}from'./UtilCharactermancerSpellSlotLevelSelect.js';import{DataConverterClass}from'./DataConverterClass.js';import{ModalFilterSpellsFvtt}from'./UtilModalFilter.js';import{DataConverter}from'./DataConverter.js';import{UtilDataConverter}from'./UtilDataConverter.js';class ActorCharactermancerSpell extends ActorCharactermancerBaseComponent{constructor(_0x549617){const _0x474fc3=_0x48db;_0x549617=_0x549617||{},super(),this[_0x474fc3(0x1a6)]=_0x549617[_0x474fc3(0x1ad)],this[_0x474fc3(0x17e)]=_0x549617[_0x474fc3(0x1c2)],this['_parent']=_0x549617[_0x474fc3(0x165)],this[_0x474fc3(0x146)]=_0x549617['tabSpells'],this[_0x474fc3(0x186)]=new PageFilterSpells(),this['_modalFilterSpells']=new ModalFilterSpellsFvtt({'namespace':_0x474fc3(0x1ed),'isRadio':!![],'allData':this[_0x474fc3(0x17e)][_0x474fc3(0x135)]}),this[_0x474fc3(0x15a)]=null,this[_0x474fc3(0x19c)]='',this[_0x474fc3(0x1ea)]=[],this['_compsSpellSpellSlotLevelSelect']=[],this[_0x474fc3(0x14e)]=null,this[_0x474fc3(0x184)]=null,this[_0x474fc3(0x199)]=[],this['_compsSpellAdditionalSpellSubclass']=[];}get['modalFilterSpells'](){return this['_modalFilterSpells'];}get[_0x149045(0x1db)](){const _0x578127=_0x149045;return this[_0x578127(0x15a)];}get[_0x149045(0x142)](){const _0x1981b7=_0x149045;return this['_pageFilterSpells']?.[_0x1981b7(0x1d1)];}get[_0x149045(0x1ec)](){const _0x31a9d6=_0x149045;return this[_0x31a9d6(0x1ea)];}get[_0x149045(0x1bc)](){return this['_compsSpellSpellSlotLevelSelect'];}get[_0x149045(0x1bd)](){const _0x426333=_0x149045;return this[_0x426333(0x14e)];}get[_0x149045(0x161)](){return this['_compSpellAdditionalSpellBackground'];}get[_0x149045(0x140)](){const _0x4d7b4d=_0x149045;return this[_0x4d7b4d(0x199)];}get['compsSpellAdditionalSpellSubclass'](){const _0x41e702=_0x149045;return this[_0x41e702(0x197)];}async[_0x149045(0x19e)](){const _0x4fb31d=_0x149045;await this[_0x4fb31d(0x174)][_0x4fb31d(0x1a9)]();}async['pRender'](){const _0x22d901=_0x149045,_0x40dd55=this['_tabSpells']?.['$wrpTab'];if(!_0x40dd55)return;const _0x3b6435=$$`<div class="ve-flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll"></div>`,_0x210780=$$`<div class="ve-flex-col w-100"></div>`,_0x5da213=$$`<div class="ve-flex-col w-100 h-100"></div>`;await this[_0x22d901(0x15e)](_0x3b6435);for(let _0x5bbd08=0x0;_0x5bbd08<this['_parent'][_0x22d901(0x1d9)][_0x22d901(0x187)][_0x22d901(0x148)]+0x1;++_0x5bbd08)this['_spell_renderClassSection'](_0x3b6435,_0x210780,_0x5da213,_0x5bbd08);const _0x2083fb=()=>{const _0x321a35=_0x22d901;this[_0x321a35(0x1d5)](_0x3b6435,_0x210780,_0x5da213,this[_0x321a35(0x14f)][_0x321a35(0x1d9)][_0x321a35(0x187)][_0x321a35(0x148)]);};this[_0x22d901(0x14f)][_0x22d901(0x1d9)]['addHookBase'](_0x22d901(0x148),_0x2083fb),this[_0x22d901(0x19f)](_0x3b6435),this[_0x22d901(0x1f0)](_0x3b6435),this['_spell_handleFilterChange'](),$$`<div class="ve-flex w-100 h-100">
			${_0x3b6435}

			<div class="vr-1"></div>

			<div class="ve-flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll">
				${_0x210780}
				${_0x5da213}
			</div>
		</div>`[_0x22d901(0x190)](_0x40dd55);}async['_spell_pRenderFilterBox'](_0x31b746){const _0x52285e=_0x149045,_0x55cd07=$(_0x52285e(0x1dd)),_0x414015=$(_0x52285e(0x14a)),_0x31d41d=$(_0x52285e(0x1a8)),_0x42ce19=$('<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>')[_0x52285e(0x15f)](()=>_0x31d41d[_0x52285e(0x1de)]('')[_0x52285e(0x1c0)]()),_0x268e1a=$(_0x52285e(0x18f)),_0x15712e=$(_0x52285e(0x1ee))[_0x52285e(0x15f)](()=>{const _0x14ed24=_0x52285e;this['_filterValuesSpellsCache']=this['_pageFilterSpells']['filterBox'][_0x14ed24(0x193)](),ui['notifications'][_0x14ed24(0x168)]('Set!');}),_0x3b9a53=ComponentUiUtil['$getBtnBool'](this,_0x52285e(0x182),{'$ele':$(_0x52285e(0x143))}),_0x3523d8=()=>this[_0x52285e(0x1ea)]['filter'](Boolean)[_0x52285e(0x160)](_0x41cd6a=>_0x41cd6a['isIncludeUaEtcSpellLists']=this[_0x52285e(0x1a1)][_0x52285e(0x182)]);this['_addHookBase']('spells_isIncludeUaEtcSpellLists',_0x3523d8),_0x3523d8(),$$(_0x31b746)`
			<div class="ve-flex-v-stretch input-group input-group--top no-shrink">
				${_0x55cd07}
				${_0x414015}
				${_0x31d41d}
				${_0x42ce19}
			</div>
			${_0x268e1a}
			<div class="ve-flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>

			<div class="mb-1 ve-flex-v-center">${_0x15712e}${_0x3b9a53}</div>
		`,await this[_0x52285e(0x186)][_0x52285e(0x1b1)]({'$iptSearch':_0x31d41d,'$btnReset':_0x42ce19,'$btnOpen':_0x55cd07,'$btnToggleSummaryHidden':_0x414015,'$wrpMiniPills':_0x268e1a,'namespace':_0x52285e(0x18a)}),this[_0x52285e(0x17e)][_0x52285e(0x135)][_0x52285e(0x160)](_0x433dc8=>this['_pageFilterSpells'][_0x52285e(0x188)](_0x433dc8)),this[_0x52285e(0x186)][_0x52285e(0x16b)](),this['_pageFilterSpells'][_0x52285e(0x1d1)][_0x52285e(0x1da)](),this[_0x52285e(0x15a)]=this[_0x52285e(0x186)][_0x52285e(0x1d1)][_0x52285e(0x193)](),UiUtil[_0x52285e(0x1e4)]({'$ipt':_0x31d41d,'fnKeyup':()=>{const _0x20b355=_0x52285e,_0x18aeac=List[_0x20b355(0x141)](_0x31d41d[_0x20b355(0x1de)]());if(this[_0x20b355(0x19c)]===_0x18aeac)return;this['_lastSearchTermSpells']=_0x18aeac,this[_0x20b355(0x1ea)][_0x20b355(0x149)](Boolean)[_0x20b355(0x160)](_0x2822de=>_0x2822de[_0x20b355(0x198)](_0x18aeac));}}),this[_0x52285e(0x186)][_0x52285e(0x1d1)]['on'](FilterBox['EVNT_VALCHANGE'],this[_0x52285e(0x1ce)]['bind'](this));}[_0x149045(0x1ce)](){const _0x3f12e1=_0x149045,_0x1f54df=this[_0x3f12e1(0x186)]['filterBox'][_0x3f12e1(0x193)]();this[_0x3f12e1(0x1ea)]['filter'](Boolean)[_0x3f12e1(0x160)](_0x51fa9f=>_0x51fa9f[_0x3f12e1(0x1be)](_0x1f54df));}[_0x149045(0x1b7)](_0x2882fa,_0x1f1a79,_0x3812bf,_0x34bb27,{isExistingClass:_0x470744,isDefault:isDefault=![]}={}){const _0x3aa8a9=_0x149045,_0x2b5386=this[_0x3aa8a9(0x18c)][_0x2882fa]?this[_0x3aa8a9(0x18c)][_0x2882fa][_0x3aa8a9(0x194)]():null;return Charactermancer_Spell_Util[_0x3aa8a9(0x1ca)]({'cls':_0x1f1a79,'sc':_0x3812bf,'targetLevel':_0x34bb27,'isExistingClass':_0x470744,'isDefault':isDefault,'formDataSlotSelectFromComp':_0x2b5386});}[_0x149045(0x1d0)](_0x148b9b,_0x24f362,_0x43f571,{existingAbilityScores:_0x599268}={}){const _0x1d951a=_0x149045,_0x2b4e01=this[_0x1d951a(0x14f)][_0x1d951a(0x151)][_0x1d951a(0x15d)]();return Charactermancer_Spell_Util['getMaxPreparedSpells']({'cls':_0x148b9b,'sc':_0x24f362,'targetLevel':_0x43f571,'existingAbilityScores':_0x599268,'abilityScoresFromComp':_0x2b4e01});}[_0x149045(0x1d5)](_0x50cc4c,_0x4c541a,_0x366cb7,_0x55b914){const _0x48bd91=_0x149045,{propIxClass:_0x21f200,propIxSubclass:_0x58f1c2,propTargetLevel:_0x34f0cc}=ActorCharactermancerBaseComponent[_0x48bd91(0x16c)](_0x55b914),_0x4c71e8=$(_0x48bd91(0x153)),_0x1fc77d=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared ve-flex-v-center"></div>`,_0x4b01f8=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared ve-flex-v-center"></div>`,_0x5c5d75=$$`<div class="mb-1 ve-flex-col"></div>`,_0xbf5452=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x1f21ab=$$`<div class="ve-flex-col"></div>`,_0x25434b=$$`<div class="ve-flex-col"></div>`['hideVe'](),_0x5535ed=$$`<div class="ve-flex-col"></div>`['hideVe'](),_0x429b66=$$`<div class="ve-flex-col"></div>`,_0x22fb8e=$('<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>')[_0x48bd91(0x15f)](()=>{const _0x459365=_0x48bd91;_0x22fb8e[_0x459365(0x145)](_0x22fb8e['text']()==='[+]'?_0x459365(0x170):'[+]'),_0x5c5d75[_0x459365(0x1cd)](),_0x139b7c['toggleVe']();}),_0x139b7c=$$`<div class="ve-flex-col w-100">
			${_0x1f21ab}
			${_0x25434b}
			${_0x5535ed}
		</div>`,_0x4ca8fd=$$`<div class="ve-flex-col mb-2">
			<div class="split-v-center">
				${_0x4c71e8}
				${_0x22fb8e}
			</div>
			${_0x1fc77d}
			${_0x5c5d75}

			${_0x139b7c}
		</div>`[_0x48bd91(0x190)](_0x50cc4c),_0x4b0971=$(_0x48bd91(0x196))[_0x48bd91(0x15f)](()=>{const _0x41daed=_0x48bd91;_0x4b0971[_0x41daed(0x145)](_0x4b0971[_0x41daed(0x145)]()===_0x41daed(0x173)?_0x41daed(0x170):_0x41daed(0x173)),_0x33bef2[_0x41daed(0x1cd)]();}),_0x33bef2=$$`<div class="ve-flex-col w-100">
			${_0x429b66}
		</div>`,_0x5a5f72=$$`<div class="ve-flex-col w-100">
			<div class="split-v-center">
				${_0xbf5452}
				${_0x4b0971}
			</div>
			${_0x4b01f8}

			${_0x33bef2}

			<hr class="hr-2">
		</div>`[_0x48bd91(0x190)](_0x4c541a),_0x26882d=this[_0x48bd91(0x164)][_0x48bd91(0x1c8)](this,_0x55b914,{'$dispClassNameLeft':_0x4c71e8,'$dispClassNameRight':_0xbf5452,'$stgClassAdditionalSpells':_0x25434b,'$stgSubclassAdditionalSpells':_0x5535ed,'$wrpLeftInner':_0x4ca8fd,'$wrpRightInner':_0x5a5f72,'$stgClassSpells':_0x1f21ab,'$stgSpellsTable':_0x429b66,'$dispSpell':_0x366cb7,'$wrpSlotLevelSelect':_0x5c5d75,'$wrpPreparedLearnedLhs':_0x1fc77d,'$wrpPreparedLearnedRhs':_0x4b01f8}),_0x2e7029=this['_hk_onChangeSubclass'][_0x48bd91(0x1c8)](this,_0x55b914,{'$dispClassNameLeft':_0x4c71e8,'$dispClassNameRight':_0xbf5452,'$stgSubclassAdditionalSpells':_0x5535ed,'$wrpLeftInner':_0x4ca8fd,'$wrpRightInner':_0x5a5f72,'$stgClassSpells':_0x1f21ab,'$stgSpellsTable':_0x429b66,'$dispSpell':_0x366cb7,'$wrpSlotLevelSelect':_0x5c5d75,'$wrpPreparedLearnedLhs':_0x1fc77d,'$wrpPreparedLearnedRhs':_0x4b01f8}),_0x474058=this[_0x48bd91(0x1ef)][_0x48bd91(0x1c8)](this,_0x55b914,{'$wrpLeftInner':_0x4ca8fd,'$wrpRightInner':_0x5a5f72}),_0x1f67a1=this[_0x48bd91(0x1e3)][_0x48bd91(0x1c8)](this,_0x55b914);this[_0x48bd91(0x14f)]['compClass'][_0x48bd91(0x1c7)](_0x21f200,_0x26882d),this['_parent'][_0x48bd91(0x1d9)][_0x48bd91(0x1c7)](_0x58f1c2,_0x2e7029),this[_0x48bd91(0x14f)][_0x48bd91(0x1d9)][_0x48bd91(0x1c7)](_0x34f0cc,_0x474058),this['_parent'][_0x48bd91(0x151)][_0x48bd91(0x19a)](_0x1f67a1),_0x26882d();}['_spell_renderRaceSection'](_0x4b0e74){const _0x7be07b=_0x149045;return this['_spell_renderRaceBackgroundSection']({'$wrpLeft':_0x4b0e74,'propPulse':'race_ixRace','propCompAdditionalSpells':_0x7be07b(0x14e),'propAlwaysPreparedSpells':_0x7be07b(0x17d),'propExpandedSpells':_0x7be07b(0x1e8),'propAlwaysKnownSpells':'alwaysKnownSpellsRace','compEntity':this['_parent'][_0x7be07b(0x154)],'fnGetEntity':()=>this[_0x7be07b(0x14f)][_0x7be07b(0x139)][_0x7be07b(0x13e)]()});}[_0x149045(0x1f0)](_0x45efbc){const _0x4a77d5=_0x149045;return this[_0x4a77d5(0x177)]({'$wrpLeft':_0x45efbc,'propPulse':_0x4a77d5(0x1a0),'propCompAdditionalSpells':_0x4a77d5(0x184),'propAlwaysPreparedSpells':_0x4a77d5(0x17a),'propExpandedSpells':_0x4a77d5(0x13b),'propAlwaysKnownSpells':_0x4a77d5(0x1d6),'compEntity':this['_parent'][_0x4a77d5(0x13a)],'fnGetEntity':()=>this[_0x4a77d5(0x14f)][_0x4a77d5(0x1a4)][_0x4a77d5(0x1a5)]({'isAllowStub':![]})});}['_spell_renderRaceBackgroundSection']({$wrpLeft:_0x489beb,propPulse:_0x44fb98,propCompAdditionalSpells:_0x2e3b64,propAlwaysPreparedSpells:_0x5285a2,propExpandedSpells:_0x4bbf45,propAlwaysKnownSpells:_0x329ab1,compEntity:_0x39d2ec,fnGetEntity:_0x12e889}){const _0x1fb0a1=_0x149045,_0xcff892=$$`<div class="ve-flex-col"></div>`[_0x1fb0a1(0x169)](),_0x36c397=()=>{const _0x4fa281=_0x1fb0a1,_0x3b91df=this[_0x4fa281(0x14f)][_0x4fa281(0x1d9)][_0x4fa281(0x157)](),_0x5cdc5b=this[_0x4fa281(0x14f)][_0x4fa281(0x1d9)][_0x4fa281(0x187)][_0x4fa281(0x15c)];if(this[_0x2e3b64]){this[_0x2e3b64][_0x4fa281(0x156)]=_0x3b91df,this[_0x2e3b64][_0x4fa281(0x17c)]=Math[_0x4fa281(0x18d)](0x1,_0x5cdc5b);const {min:_0x3ac76d,max:_0x5737ec,isAnyCantrips:_0xd49bb0}=this['_parent']['compClass'][_0x4fa281(0x1af)]();this[_0x2e3b64][_0x4fa281(0x1e9)]=_0x3ac76d,this[_0x2e3b64][_0x4fa281(0x179)]=_0x5737ec,this[_0x2e3b64][_0x4fa281(0x16e)]=_0xd49bb0;}};this[_0x1fb0a1(0x14f)][_0x1fb0a1(0x1d9)]['addHookBase'](_0x1fb0a1(0x15c),_0x36c397),this['_parent'][_0x1fb0a1(0x1d9)][_0x1fb0a1(0x1c7)](_0x1fb0a1(0x192),_0x36c397);const _0x5d2396=$(_0x1fb0a1(0x153)),_0x4b178c=$('<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>')[_0x1fb0a1(0x15f)](()=>{const _0x6efa99=_0x1fb0a1;_0x4b178c[_0x6efa99(0x145)](_0x4b178c[_0x6efa99(0x145)]()===_0x6efa99(0x173)?_0x6efa99(0x170):_0x6efa99(0x173)),_0x29b663[_0x6efa99(0x1cd)]();}),_0x29b663=$$`<div class="ve-flex-col w-100">
			${_0xcff892}
		</div>`,_0x2a26d5=$$`<div class="ve-flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x5d2396}
				${_0x4b178c}
			</div>

			${_0x29b663}
		</div>`['hideVe']()[_0x1fb0a1(0x190)](_0x489beb),_0x1750f7=()=>{const _0xed0368=_0x1fb0a1;_0xcff892[_0xed0368(0x1b0)]();const _0xb8e2b2=_0x12e889();let _0x504d49=![];if(_0xb8e2b2&&_0xb8e2b2[_0xed0368(0x1e7)]){_0x504d49=!![],_0xcff892[_0xed0368(0x1e6)](),this[_0x2e3b64]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0xed0368(0x17e)][_0xed0368(0x135)],'additionalSpells':_0xb8e2b2[_0xed0368(0x1e7)],'modalFilterSpells':this[_0xed0368(0x174)]}),this[_0x2e3b64][_0xed0368(0x1da)](_0xcff892);const _0x174272=()=>this['_compsSpellSpells'][_0xed0368(0x149)](Boolean)[_0xed0368(0x160)](_0x7ff8e7=>_0x7ff8e7[_0x5285a2]=MiscUtil[_0xed0368(0x180)](this[_0x2e3b64][_0xed0368(0x1dc)]));this[_0x2e3b64]['addHookAlwaysPreparedSpells'](_0x174272),_0x174272();const _0x3eb0de=()=>this[_0xed0368(0x1ea)][_0xed0368(0x149)](Boolean)[_0xed0368(0x160)](_0xa991fe=>_0xa991fe[_0x4bbf45]=MiscUtil['copy'](this[_0x2e3b64][_0xed0368(0x19d)]));this[_0x2e3b64][_0xed0368(0x1c3)](_0x3eb0de),_0x3eb0de();const _0x961776=()=>this[_0xed0368(0x1ea)][_0xed0368(0x149)](Boolean)['forEach'](_0x30ed07=>_0x30ed07[_0x329ab1]=MiscUtil[_0xed0368(0x180)](this[_0x2e3b64]['spellsAlwaysKnown']));this[_0x2e3b64][_0xed0368(0x144)](_0x961776),_0x961776();}else _0xcff892[_0xed0368(0x169)](),this[_0x2e3b64]=null,this[_0xed0368(0x1ea)]['filter'](Boolean)[_0xed0368(0x160)](_0x46d44e=>_0x46d44e[_0x4bbf45]=[]);_0xb8e2b2&&_0x504d49?(_0x2a26d5[_0xed0368(0x1e6)](),_0x5d2396[_0xed0368(0x145)](_0xb8e2b2[_0xed0368(0x13c)])):_0x2a26d5[_0xed0368(0x169)](),_0x36c397();};_0x39d2ec['addHookBase'](_0x44fb98,_0x1750f7),_0x1750f7();}[_0x149045(0x164)](_0x422fb7,{$stgClassSpells:_0x30035e,$stgSpellsTable:_0x38d398,$dispClassNameLeft:_0x22405a,$dispClassNameRight:_0x3d15a9,$stgClassAdditionalSpells:_0x4c29de,$stgSubclassAdditionalSpells:_0x23f187,$wrpLeftInner:_0x43ec92,$wrpRightInner:_0x5c971b,$dispSpell:_0x4d874c,$wrpSlotLevelSelect:_0x5cd38a,$wrpPreparedLearnedLhs:_0x553099,$wrpPreparedLearnedRhs:_0x1def86}){const _0xb7700b=_0x149045,{propIxClass:_0x118835,propIxSubclass:_0x19fac9,propTargetLevel:_0x42199d}=ActorCharactermancerBaseComponent[_0xb7700b(0x16c)](_0x422fb7),_0x50513f=this[_0xb7700b(0x14f)]['compClass'][_0xb7700b(0x1cc)]({'propIxClass':_0x118835}),_0x20e2db=this['_parent'][_0xb7700b(0x1d9)]['getSubclass_']({'cls':_0x50513f,'propIxSubclass':_0x19fac9});if(!_0x50513f||!this['constructor'][_0xb7700b(0x17b)](_0x50513f,_0x20e2db)){this[_0xb7700b(0x137)]({'$stgClassSpells':_0x30035e,'$stgSpellsTable':_0x38d398,'$wrpLeftInner':_0x43ec92,'$wrpRightInner':_0x5c971b,'ix':_0x422fb7});return;}_0x30035e[_0xb7700b(0x1b0)](),_0x38d398[_0xb7700b(0x1b0)](),this[_0xb7700b(0x162)]({'ix':_0x422fb7,'cls':_0x50513f,'sc':_0x20e2db,'$wrpPreparedLearnedLhs':_0x553099,'$wrpPreparedLearnedRhs':_0x1def86,'propTargetLevel':_0x42199d}),_0x4c29de[_0xb7700b(0x1b0)]();if(_0x50513f&&_0x50513f['additionalSpells']){_0x4c29de[_0xb7700b(0x1e6)]()[_0xb7700b(0x1c6)](_0xb7700b(0x155)+_0x50513f[_0xb7700b(0x13c)]+_0xb7700b(0x138)),this[_0xb7700b(0x199)][_0x422fb7]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0xb7700b(0x17e)]['spell'],'additionalSpells':_0x50513f[_0xb7700b(0x1e7)],'modalFilterSpells':this[_0xb7700b(0x174)]}),this['_compsSpellAdditionalSpellClass'][_0x422fb7]['render'](_0x4c29de);const _0x2e1834=()=>{const _0x4947c9=_0xb7700b;if(this[_0x4947c9(0x1ea)][_0x422fb7])this[_0x4947c9(0x1ea)][_0x422fb7][_0x4947c9(0x14c)]=MiscUtil['copy'](this['_compsSpellAdditionalSpellClass'][_0x422fb7]['spellsAlwaysPrepared']);};this[_0xb7700b(0x199)][_0x422fb7]['addHookAlwaysPreparedSpells'](_0x2e1834);const _0x1b38d9=()=>{const _0x5c5a3a=_0xb7700b;if(this['_compsSpellSpells'][_0x422fb7])this[_0x5c5a3a(0x1ea)][_0x422fb7]['expandedSpellsClass']=MiscUtil[_0x5c5a3a(0x180)](this['_compsSpellAdditionalSpellClass'][_0x422fb7]['spellsExpanded']);};this[_0xb7700b(0x199)][_0x422fb7][_0xb7700b(0x1c3)](_0x1b38d9);const _0x51bd75=()=>{const _0x1de8e0=_0xb7700b;if(this[_0x1de8e0(0x1ea)][_0x422fb7])this[_0x1de8e0(0x1ea)][_0x422fb7][_0x1de8e0(0x1ab)]=MiscUtil[_0x1de8e0(0x180)](this[_0x1de8e0(0x199)][_0x422fb7][_0x1de8e0(0x150)]);};this[_0xb7700b(0x199)][_0x422fb7]['addHookAlwaysKnownSpells'](_0x51bd75);}else _0x4c29de[_0xb7700b(0x169)](),this['_compsSpellAdditionalSpellClass'][_0x422fb7]=null;this['_hk_onChangeSubclass'](_0x422fb7,{'$dispClassNameLeft':_0x22405a,'$dispClassNameRight':_0x3d15a9,'$stgClassSpells':_0x30035e,'$stgSpellsTable':_0x38d398,'$stgSubclassAdditionalSpells':_0x23f187,'$wrpLeftInner':_0x43ec92,'$wrpRightInner':_0x5c971b});if(this[_0xb7700b(0x1ea)][_0x422fb7]&&this[_0xb7700b(0x199)][_0x422fb7])this[_0xb7700b(0x1ea)][_0x422fb7]['alwaysPreparedSpellsClass']=MiscUtil[_0xb7700b(0x180)](this['_compsSpellAdditionalSpellClass'][_0x422fb7][_0xb7700b(0x1dc)]),this[_0xb7700b(0x1ea)][_0x422fb7][_0xb7700b(0x16a)]=MiscUtil[_0xb7700b(0x180)](this['_compsSpellAdditionalSpellClass'][_0x422fb7][_0xb7700b(0x19d)]),this[_0xb7700b(0x1ea)][_0x422fb7][_0xb7700b(0x1ab)]=MiscUtil[_0xb7700b(0x180)](this[_0xb7700b(0x199)][_0x422fb7][_0xb7700b(0x150)]);else{if(this[_0xb7700b(0x1ea)][_0x422fb7])this[_0xb7700b(0x1ea)][_0x422fb7]['alwaysPreparedSpellsClass']=[];if(this['_compsSpellSpells'][_0x422fb7])this['_compsSpellSpells'][_0x422fb7][_0xb7700b(0x16a)]=[];if(this[_0xb7700b(0x1ea)][_0x422fb7])this['_compsSpellSpells'][_0x422fb7][_0xb7700b(0x1ab)]=[];}this[_0xb7700b(0x18e)]({'ix':_0x422fb7,'$stgClassSpells':_0x30035e,'$stgSpellsTable':_0x38d398,'$dispSpell':_0x4d874c,'$wrpSlotLevelSelect':_0x5cd38a});}['_hk_shared_doCleanupClassSubclass']({$stgClassSpells:_0x1ce206,$stgSpellsTable:_0x3a6eb0,$wrpLeftInner:_0xed0c59,$wrpRightInner:_0x312c9e,ix:_0x4569e8}){const _0x55ae48=_0x149045;_0x1ce206[_0x55ae48(0x1b0)](),_0x3a6eb0[_0x55ae48(0x1b0)](),_0xed0c59['hideVe'](),_0x312c9e[_0x55ae48(0x169)](),this[_0x55ae48(0x1ea)][_0x4569e8]=null,this[_0x55ae48(0x18c)][_0x4569e8]=null;}[_0x149045(0x162)]({ix:_0x595129,cls:_0xc410b3,sc:_0x41bbd2,$wrpPreparedLearnedLhs:_0x414c64,$wrpPreparedLearnedRhs:_0x127c1a,propTargetLevel:_0x20a2d9}){const _0x3ea28e=_0x149045,_0x3f7088=this['_parent']['compClass']['existingClassMetas'][_0x595129];this[_0x3ea28e(0x1ea)][_0x595129]=new Charactermancer_Spell({'actor':this[_0x3ea28e(0x1a6)],'existingClass':_0x3f7088?this[_0x3ea28e(0x17e)]['class'][_0x3f7088[_0x3ea28e(0x195)]]:null,'existingCasterMeta':this[_0x3ea28e(0x1ba)]({'ix':_0x595129,'cls':_0xc410b3,'sc':_0x41bbd2,'existingClassMeta':_0x3f7088}),'spellDatas':this[_0x3ea28e(0x17e)][_0x3ea28e(0x135)],'className':_0xc410b3['name'],'classSource':_0xc410b3[_0x3ea28e(0x1a2)],'brewClassSpells':_0xc410b3[_0x3ea28e(0x167)],'subclassName':_0x41bbd2?.[_0x3ea28e(0x13c)],'subclassShortName':_0x41bbd2?.['shortName'],'subclassSource':_0x41bbd2?.['source'],'brewSubclassSpells':_0x41bbd2?.[_0x3ea28e(0x183)],'brewSubSubclassSpells':_0x41bbd2?.['subSubclassSpells'],'pageFilter':this[_0x3ea28e(0x186)],'$wrpsPreparedLearned':[_0x414c64,_0x127c1a]}),this['_compsSpellSpellSlotLevelSelect'][_0x595129]=new Charactermancer_Spell_SlotLevelSelect({'className':_0xc410b3[_0x3ea28e(0x13c)],'spellSlotLevelSelection':_0x3f7088?.[_0x3ea28e(0x1b3)]});const _0x448f27=()=>{const _0x3a6560=_0x3ea28e,_0xa5914f=this[_0x3a6560(0x14f)]['compClass'][_0x3a6560(0x187)][_0x20a2d9];this[_0x3a6560(0x1ea)][_0x595129]&&(this[_0x3a6560(0x1ea)][_0x595129][_0x3a6560(0x1c4)]=this[_0x3a6560(0x1b7)](_0x595129,_0xc410b3,_0x41bbd2,_0xa5914f),this[_0x3a6560(0x1ea)][_0x595129][_0x3a6560(0x1d3)]=this[_0x3a6560(0x1b7)](_0x595129,_0xc410b3,_0x41bbd2,_0xa5914f,{'isDefault':!![]}));};this['_compsSpellSpellSlotLevelSelect'][_0x595129][_0x3ea28e(0x1ac)](_0x448f27),_0x448f27();}[_0x149045(0x18e)]({ix:_0xdf43dc,$stgClassSpells:_0x4798bb,$stgSpellsTable:_0x16af0b,$dispSpell:_0x538754,$wrpSlotLevelSelect:_0x4ac32a}){const _0x87ec37=_0x149045;this[_0x87ec37(0x1ea)][_0xdf43dc][_0x87ec37(0x1da)](_0x4798bb,_0x538754),this['_compsSpellSpellSlotLevelSelect'][_0xdf43dc][_0x87ec37(0x1da)](_0x4ac32a);const _0x5e3843=this[_0x87ec37(0x186)][_0x87ec37(0x1d1)]['getValues']();this[_0x87ec37(0x1ea)][_0xdf43dc][_0x87ec37(0x1be)](_0x5e3843);if(this[_0x87ec37(0x14e)])this[_0x87ec37(0x1ea)][_0xdf43dc][_0x87ec37(0x1e8)]=MiscUtil[_0x87ec37(0x180)](this[_0x87ec37(0x14e)][_0x87ec37(0x19d)]);if(this[_0x87ec37(0x184)])this[_0x87ec37(0x1ea)][_0xdf43dc][_0x87ec37(0x13b)]=MiscUtil[_0x87ec37(0x180)](this[_0x87ec37(0x184)][_0x87ec37(0x19d)]);}[_0x149045(0x1e2)]({ix:_0x273720}){const _0x15f87e=_0x149045;if(!this[_0x15f87e(0x1ea)][_0x273720])return;const _0x31d01d=this[_0x15f87e(0x186)][_0x15f87e(0x1d1)][_0x15f87e(0x193)]();this['_compsSpellSpells'][_0x273720][_0x15f87e(0x1be)](_0x31d01d);}[_0x149045(0x1e3)](_0x146a7b){const _0x4f71a8=_0x149045,{propIxClass:_0x14b95d,propTargetLevel:_0x355de2,propIxSubclass:_0x17c8ef}=ActorCharactermancerBaseComponent['class_getProps'](_0x146a7b),_0x38f2c4=this[_0x4f71a8(0x14f)][_0x4f71a8(0x1d9)][_0x4f71a8(0x1cc)]({'propIxClass':_0x14b95d}),_0x5b6c35=this[_0x4f71a8(0x14f)][_0x4f71a8(0x1d9)]['getSubclass_']({'cls':_0x38f2c4,'propIxSubclass':_0x17c8ef}),_0x3a0f81=this[_0x4f71a8(0x14f)][_0x4f71a8(0x1d9)]['state'][_0x355de2];if(this[_0x4f71a8(0x1ea)][_0x146a7b])this[_0x4f71a8(0x1ea)][_0x146a7b][_0x4f71a8(0x163)]=this[_0x4f71a8(0x1d0)](_0x38f2c4,_0x5b6c35,_0x3a0f81);}[_0x149045(0x191)](_0x3658cc,{$stgClassSpells:_0x4f7178,$stgSpellsTable:_0x4644d8,$dispClassNameLeft:_0x2cd0e0,$dispClassNameRight:_0x18213b,$stgSubclassAdditionalSpells:_0x3ac0e1,$wrpLeftInner:_0x2b8dd0,$wrpRightInner:_0xb00b7f,$wrpPreparedLearnedLhs:_0xf74fff,$wrpPreparedLearnedRhs:_0x4a39dc,$dispSpell:_0x3d5b27,$wrpSlotLevelSelect:_0x3deda8}){const _0x52c44f=_0x149045,{propIxClass:_0x152f75,propIxSubclass:_0x2d2b46,propTargetLevel:_0x3923d4}=ActorCharactermancerBaseComponent[_0x52c44f(0x16c)](_0x3658cc),_0x5e96cb=this[_0x52c44f(0x14f)][_0x52c44f(0x1d9)]['getClass_']({'propIxClass':_0x152f75}),_0x259c0e=this['_parent']['compClass']['getSubclass_']({'cls':_0x5e96cb,'propIxSubclass':_0x2d2b46}),_0x3ad4b2=_0x5e96cb?''+_0x5e96cb[_0x52c44f(0x13c)]+(_0x259c0e?'\x20('+_0x259c0e[_0x52c44f(0x13c)]+')':''):'';_0x2cd0e0[_0x52c44f(0x145)](_0x3ad4b2),_0x18213b['text'](_0x3ad4b2),this[_0x52c44f(0x158)](_0x3658cc,{'cls':_0x5e96cb,'sc':_0x259c0e,'$stgSpellsTable':_0x4644d8});const _0x35ed04=this[_0x52c44f(0x13f)][_0x52c44f(0x17b)](_0x5e96cb,_0x259c0e),_0x5fbd5b=_0x35ed04&&!this[_0x52c44f(0x1ea)][_0x3658cc];if(!_0x35ed04&&this[_0x52c44f(0x1ea)][_0x3658cc]){this[_0x52c44f(0x137)]({'$stgClassSpells':_0x4f7178,'$stgSpellsTable':_0x4644d8,'$wrpLeftInner':_0x2b8dd0,'$wrpRightInner':_0xb00b7f,'ix':_0x3658cc});return;}else _0x5fbd5b&&this[_0x52c44f(0x162)]({'ix':_0x3658cc,'cls':_0x5e96cb,'sc':_0x259c0e,'$wrpPreparedLearnedLhs':_0xf74fff,'$wrpPreparedLearnedRhs':_0x4a39dc,'propTargetLevel':_0x3923d4});_0x3ac0e1[_0x52c44f(0x1b0)]();if(_0x259c0e&&_0x259c0e[_0x52c44f(0x1e7)]){_0x3ac0e1[_0x52c44f(0x1e6)]()[_0x52c44f(0x1c6)](_0x52c44f(0x147)+_0x259c0e[_0x52c44f(0x13c)]+')</div>'),this[_0x52c44f(0x197)][_0x3658cc]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x52c44f(0x17e)][_0x52c44f(0x135)],'additionalSpells':_0x259c0e[_0x52c44f(0x1e7)],'modalFilterSpells':this['_modalFilterSpells']}),this['_compsSpellAdditionalSpellSubclass'][_0x3658cc][_0x52c44f(0x1da)](_0x3ac0e1);const _0x23d5a7=()=>{const _0x502d38=_0x52c44f;if(this[_0x502d38(0x1ea)][_0x3658cc])this[_0x502d38(0x1ea)][_0x3658cc]['alwaysPreparedSpellsSubclass']=MiscUtil['copy'](this['_compsSpellAdditionalSpellSubclass'][_0x3658cc][_0x502d38(0x1dc)]);};this[_0x52c44f(0x197)][_0x3658cc][_0x52c44f(0x1aa)](_0x23d5a7);const _0xc41932=()=>{const _0x375943=_0x52c44f;if(this[_0x375943(0x1ea)][_0x3658cc])this[_0x375943(0x1ea)][_0x3658cc][_0x375943(0x181)]=MiscUtil[_0x375943(0x180)](this[_0x375943(0x197)][_0x3658cc][_0x375943(0x19d)]);};this[_0x52c44f(0x197)][_0x3658cc]['addHookExpandedSpells'](_0xc41932);const _0x4c72d8=()=>{const _0x5dbe39=_0x52c44f;if(this[_0x5dbe39(0x1ea)][_0x3658cc])this[_0x5dbe39(0x1ea)][_0x3658cc][_0x5dbe39(0x1df)]=MiscUtil[_0x5dbe39(0x180)](this[_0x5dbe39(0x197)][_0x3658cc][_0x5dbe39(0x150)]);};this[_0x52c44f(0x197)][_0x3658cc]['addHookAlwaysKnownSpells'](_0x4c72d8);}else _0x3ac0e1[_0x52c44f(0x169)](),this[_0x52c44f(0x197)][_0x3658cc]=null;this[_0x52c44f(0x1ef)](_0x3658cc,{'$wrpLeftInner':_0x2b8dd0,'$wrpRightInner':_0xb00b7f});const _0x44be58=DataConverter[_0x52c44f(0x166)](_0x5e96cb?.[_0x52c44f(0x1a3)],_0x259c0e?.['casterProgression']);this[_0x52c44f(0x1ea)][_0x3658cc]&&(this['_compsSpellSpells'][_0x3658cc][_0x52c44f(0x1ae)]=_0x259c0e?.[_0x52c44f(0x13c)],this[_0x52c44f(0x1ea)][_0x3658cc][_0x52c44f(0x159)]=_0x259c0e?.[_0x52c44f(0x19b)],this[_0x52c44f(0x1ea)][_0x3658cc][_0x52c44f(0x14b)]=_0x259c0e?.[_0x52c44f(0x1a2)],this['_compsSpellSpells'][_0x3658cc]['casterProgression']=_0x44be58);if(this['_compsSpellSpellSlotLevelSelect'][_0x3658cc])this[_0x52c44f(0x18c)][_0x3658cc][_0x52c44f(0x1a3)]=_0x44be58;if(this[_0x52c44f(0x1ea)][_0x3658cc]&&this[_0x52c44f(0x197)][_0x3658cc])this[_0x52c44f(0x1ea)][_0x3658cc][_0x52c44f(0x1e5)]=MiscUtil[_0x52c44f(0x180)](this[_0x52c44f(0x197)][_0x3658cc]['spellsAlwaysPrepared']),this[_0x52c44f(0x1ea)][_0x3658cc][_0x52c44f(0x181)]=MiscUtil[_0x52c44f(0x180)](this[_0x52c44f(0x197)][_0x3658cc][_0x52c44f(0x19d)]),this[_0x52c44f(0x1ea)][_0x3658cc]['alwaysKnownSpellsSubclass']=MiscUtil['copy'](this['_compsSpellAdditionalSpellSubclass'][_0x3658cc][_0x52c44f(0x150)]);else{if(this[_0x52c44f(0x1ea)][_0x3658cc])this['_compsSpellSpells'][_0x3658cc][_0x52c44f(0x1e5)]=[];if(this[_0x52c44f(0x1ea)][_0x3658cc])this[_0x52c44f(0x1ea)][_0x3658cc][_0x52c44f(0x181)]=[];if(this[_0x52c44f(0x1ea)][_0x3658cc])this[_0x52c44f(0x1ea)][_0x3658cc][_0x52c44f(0x1df)]=[];}if(_0x5fbd5b)this[_0x52c44f(0x18e)]({'ix':_0x3658cc,'$stgClassSpells':_0x4f7178,'$dispSpell':_0x3d5b27,'$wrpSlotLevelSelect':_0x3deda8});else this[_0x52c44f(0x1e2)]({'ix':_0x3658cc});}async[_0x149045(0x158)](_0x7e460f,{cls:_0x111d5e,sc:_0x34cbfa,$stgSpellsTable:_0x5970de}){const _0x2f0db7=_0x149045,{lockChangeSubclassTable:_0x80a199}=this['constructor'][_0x2f0db7(0x1b8)](_0x7e460f);try{await this[_0x2f0db7(0x1b9)](_0x80a199),await this[_0x2f0db7(0x1b2)](_0x7e460f,{'cls':_0x111d5e,'sc':_0x34cbfa,'$stgSpellsTable':_0x5970de});}finally{this[_0x2f0db7(0x178)](_0x80a199);}}async[_0x149045(0x1b2)](_0x483670,{cls:_0x986bee,sc:_0x459cd1,$stgSpellsTable:_0x5460df}){const _0x34ae7b=_0x149045,_0x1a02bd=_0x986bee?await DataUtil[_0x34ae7b(0x17f)][_0x34ae7b(0x1c1)](_0x986bee):null,_0x14a2c4=_0x459cd1?await DataUtil['class']['pGetDereferencedSubclassData'](_0x459cd1):null,_0xd3e67=DataConverterClass['getRenderedClassTableFromDereferenced'](_0x1a02bd,_0x14a2c4,{'isSpellsOnly':!![]});_0x5460df['html']('')['fastSetHtml'](_0xd3e67);}static[_0x149045(0x1b8)](_0x31b3f0){const _0xcdabf5=_0x149045;return{'lockChangeSubclassTable':_0xcdabf5(0x1cf)+_0x31b3f0+_0xcdabf5(0x13d)};}[_0x149045(0x1ef)](_0x1b000e,{$wrpLeftInner:_0x4db8cb,$wrpRightInner:_0x171e94}){const _0x127d15=_0x149045,{propIxClass:_0x5dc2bd,propIxSubclass:_0x5a28ef,propCurLevel:_0x57ff7f,propTargetLevel:_0x1f8fd8}=ActorCharactermancerBaseComponent['class_getProps'](_0x1b000e),_0x358d89=this[_0x127d15(0x14f)][_0x127d15(0x1d9)][_0x127d15(0x1cc)]({'propIxClass':_0x5dc2bd}),_0x4c81c2=this[_0x127d15(0x14f)]['compClass'][_0x127d15(0x1b5)]({'cls':_0x358d89,'propIxSubclass':_0x5a28ef}),_0x25f59d=this[_0x127d15(0x14f)][_0x127d15(0x1d9)]['state'][_0x57ff7f]??0x0,_0x531210=this['_parent'][_0x127d15(0x1d9)][_0x127d15(0x187)][_0x1f8fd8],_0x3d5b22=DataConverter[_0x127d15(0x166)](_0x358d89?.[_0x127d15(0x1a3)],_0x4c81c2?.[_0x127d15(0x1a3)]),_0x3e66f6=Charactermancer_Spell_Util[_0x127d15(0x1bb)]({'casterProgression':_0x3d5b22,'curLevel':_0x25f59d,'targetLevel':_0x531210});if(this[_0x127d15(0x1ea)][_0x1b000e]){if(_0x3e66f6){const {spellLevelLow:_0x4e4ae5,spellLevelHigh:_0x1c712a}=_0x3e66f6;this[_0x127d15(0x1ea)][_0x1b000e]['spellLevelLow']=_0x4e4ae5,this['_compsSpellSpells'][_0x1b000e]['spellLevelHigh']=_0x1c712a;}else this[_0x127d15(0x1ea)][_0x1b000e][_0x127d15(0x1e9)]=null,this['_compsSpellSpells'][_0x1b000e][_0x127d15(0x179)]=null;this['_compsSpellSpells'][_0x1b000e][_0x127d15(0x175)]=Charactermancer_Spell_Util['getMaxLearnedCantrips']({'cls':_0x358d89,'sc':_0x4c81c2,'targetLevel':_0x531210}),this[_0x127d15(0x1ea)][_0x1b000e][_0x127d15(0x1c4)]=this[_0x127d15(0x1b7)](_0x1b000e,_0x358d89,_0x4c81c2,_0x531210),this['_compsSpellSpells'][_0x1b000e][_0x127d15(0x1d3)]=this['_spell_getFixedLearnedProgression'](_0x1b000e,_0x358d89,_0x4c81c2,_0x531210,{'isDefault':!![]}),this[_0x127d15(0x1ea)][_0x1b000e][_0x127d15(0x1d4)]=this['_state'][_0x127d15(0x182)];}this['_hk_onChangeAbilityScores'](_0x1b000e);this[_0x127d15(0x18c)][_0x1b000e]&&(this['_compsSpellSpellSlotLevelSelect'][_0x1b000e][_0x127d15(0x156)]=_0x25f59d,this[_0x127d15(0x18c)][_0x1b000e][_0x127d15(0x17c)]=_0x531210,this[_0x127d15(0x18c)][_0x1b000e][_0x127d15(0x1bf)]=_0x358d89?.[_0x127d15(0x1bf)]||_0x4c81c2?.['spellsKnownProgression'],this[_0x127d15(0x18c)][_0x1b000e][_0x127d15(0x1a3)]=_0x3d5b22,this[_0x127d15(0x18c)][_0x1b000e][_0x127d15(0x1f2)]=_0x358d89?.[_0x127d15(0x1f2)]||_0x4c81c2?.[_0x127d15(0x1f2)],this[_0x127d15(0x18c)][_0x1b000e]['spellsKnownProgressionFixedAllowLowerLevel']=_0x358d89?.[_0x127d15(0x1d2)]||_0x4c81c2?.[_0x127d15(0x1d2)]);if(this[_0x127d15(0x199)][_0x1b000e]){this[_0x127d15(0x199)][_0x1b000e][_0x127d15(0x156)]=_0x25f59d,this[_0x127d15(0x199)][_0x1b000e][_0x127d15(0x17c)]=_0x531210;if(_0x3e66f6){const {spellLevelLow:_0xa5833c,spellLevelHigh:_0xfbe688}=_0x3e66f6;this[_0x127d15(0x199)][_0x1b000e][_0x127d15(0x1e9)]=_0xa5833c,this[_0x127d15(0x199)][_0x1b000e][_0x127d15(0x179)]=_0xfbe688;}else this[_0x127d15(0x199)][_0x1b000e][_0x127d15(0x1e9)]=null,this[_0x127d15(0x199)][_0x1b000e][_0x127d15(0x179)]=null;}if(this[_0x127d15(0x197)][_0x1b000e]){this[_0x127d15(0x197)][_0x1b000e][_0x127d15(0x156)]=_0x25f59d,this[_0x127d15(0x197)][_0x1b000e][_0x127d15(0x17c)]=_0x531210;if(_0x3e66f6){const {spellLevelLow:_0x27ba54,spellLevelHigh:_0x14bbdd}=_0x3e66f6;this[_0x127d15(0x197)][_0x1b000e]['spellLevelLow']=_0x27ba54,this[_0x127d15(0x197)][_0x1b000e]['spellLevelHigh']=_0x14bbdd;}else this['_compsSpellAdditionalSpellSubclass'][_0x1b000e]['spellLevelLow']=null,this[_0x127d15(0x197)][_0x1b000e][_0x127d15(0x179)]=null;}if(_0x358d89){const _0x14e044=this[_0x127d15(0x13f)][_0x127d15(0x1f1)](_0x358d89,_0x4c81c2,_0x531210);_0x4db8cb['toggleVe'](_0x14e044);const _0x10f8b6=this[_0x127d15(0x13f)][_0x127d15(0x17b)](_0x358d89,_0x4c81c2);_0x171e94[_0x127d15(0x1cd)](_0x10f8b6);}}static[_0x149045(0x17b)](_0x1675ba,_0xe29fdd){const _0x4e89fc=_0x149045;return _0x1675ba?.[_0x4e89fc(0x1a3)]||_0xe29fdd?.[_0x4e89fc(0x1a3)]||_0x1675ba?.[_0x4e89fc(0x1e7)]||_0xe29fdd?.[_0x4e89fc(0x1e7)]||_0x1675ba?.[_0x4e89fc(0x16d)]||_0xe29fdd?.['cantripProgression'];}static[_0x149045(0x1f1)](_0x4c5ca2,_0x3c873e,_0x59b4bd){const _0x4c1ab0=_0x149045;if(!this[_0x4c1ab0(0x17b)](_0x4c5ca2,_0x3c873e))return![];if(_0x59b4bd==null)return![];const {casterProgression:_0x3f6022}=Charactermancer_Class_Util['getCasterProgression'](_0x4c5ca2,_0x3c873e,{'targetLevel':_0x59b4bd}),_0x322973=UtilDataConverter[_0x4c1ab0(0x152)][_0x3f6022];if((_0x322973?.[_0x59b4bd-0x1]||[])[_0x4c1ab0(0x1c9)](Boolean))return!![];if(this[_0x4c1ab0(0x1e0)](_0x4c5ca2?.[_0x4c1ab0(0x1e7)],_0x59b4bd))return!![];if(this[_0x4c1ab0(0x1e0)](_0x3c873e?.[_0x4c1ab0(0x1e7)],_0x59b4bd))return!![];if(this[_0x4c1ab0(0x1d7)](_0x4c5ca2?.['cantripProgression'],_0x59b4bd))return!![];if(this[_0x4c1ab0(0x1d7)](_0x3c873e?.[_0x4c1ab0(0x16d)],_0x59b4bd))return!![];return![];}static['_spell_isCasterClassAtLevel_additionalSpells'](_0x4bfb7c,_0x54bd7a){const _0x3eb6bf=_0x149045;if(!_0x4bfb7c)return![];if(_0x54bd7a==null)return![];return _0x4bfb7c[_0x3eb6bf(0x1c9)](_0xb30799=>this['_spell_isCasterClassAtLevel_additionalSpellsBlock'](_0xb30799,_0x54bd7a));}static[_0x149045(0x1eb)](_0x4b7c11,_0x707e9d){const _0x65f0c0=_0x149045,_0x5b272f=Object[_0x65f0c0(0x1a7)](_0x4b7c11);for(const _0x4677f6 of _0x5b272f){switch(_0x4677f6){case _0x65f0c0(0x1cb):case _0x65f0c0(0x171):case _0x65f0c0(0x18b):{const _0x4db5e5=Object[_0x65f0c0(0x1a7)](_0x4b7c11[_0x4677f6]||{})[_0x65f0c0(0x1c9)](_0x17694f=>{const _0x14ffd7=_0x65f0c0,_0x38756f=/^s(\d+)$/i[_0x14ffd7(0x172)](_0x17694f);if(_0x38756f)return![];if(isNaN(_0x17694f))return![];return Number(_0x17694f)<=_0x707e9d;});if(_0x4db5e5)return!![];}}}return![];}static[_0x149045(0x1d7)](_0x5675e3,_0xc47adf){return!!_0x5675e3?.[_0xc47adf-0x1];}['_spell_getExistingCasterMeta']({ix:_0x583661,cls:_0x4b9507,sc:_0x1aca2c,existingClassMeta:_0x1f224f}){const _0x3e8c90=_0x149045;if(!_0x1f224f?.[_0x3e8c90(0x176)])return null;const _0x1790eb=this[_0x3e8c90(0x18c)][_0x583661]?this[_0x3e8c90(0x18c)][_0x583661]['getFormData']():null,_0x2f3ddf=this[_0x3e8c90(0x14f)][_0x3e8c90(0x151)]['getTotals']();return Charactermancer_Spell_Util[_0x3e8c90(0x1b4)]({'cls':_0x4b9507,'sc':_0x1aca2c,'actor':this[_0x3e8c90(0x1a6)],'targetLevel':_0x1f224f[_0x3e8c90(0x176)],'formDataSlotSelectFromComp':_0x1790eb,'abilityScoresFromComp':_0x2f3ddf});}[_0x149045(0x15b)](){return{'spells_isIncludeUaEtcSpellLists':![]};}}export{ActorCharactermancerSpell};