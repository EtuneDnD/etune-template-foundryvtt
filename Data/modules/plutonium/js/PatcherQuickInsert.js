function _0x5bb2(_0x1a8bd7,_0x48cc15){const _0x4b848d=_0x4b84();return _0x5bb2=function(_0x5bb211,_0x501b42){_0x5bb211=_0x5bb211-0x12b;let _0x4ecfe5=_0x4b848d[_0x5bb211];return _0x4ecfe5;},_0x5bb2(_0x1a8bd7,_0x48cc15);}const _0x273265=_0x5bb2;(function(_0x312eb0,_0x2ef9c3){const _0x5b8acd=_0x5bb2,_0x3bbfdc=_0x312eb0();while(!![]){try{const _0x311269=parseInt(_0x5b8acd(0x13c))/0x1*(-parseInt(_0x5b8acd(0x178))/0x2)+-parseInt(_0x5b8acd(0x16c))/0x3*(-parseInt(_0x5b8acd(0x19a))/0x4)+parseInt(_0x5b8acd(0x16b))/0x5+parseInt(_0x5b8acd(0x15c))/0x6+-parseInt(_0x5b8acd(0x158))/0x7+-parseInt(_0x5b8acd(0x15f))/0x8+parseInt(_0x5b8acd(0x153))/0x9;if(_0x311269===_0x2ef9c3)break;else _0x3bbfdc['push'](_0x3bbfdc['shift']());}catch(_0x2c8bf5){_0x3bbfdc['push'](_0x3bbfdc['shift']());}}}(_0x4b84,0x791b3));function _0x4b84(){const _0x448885=['indexingDisabled','entries','split','528726eiuCov','has','pagesHidden','addItem','getTempDocumentDefaultOwnership','isFilterSourcesUa','indexCompendiums','itemType','length','_pGetBrewImageUrl','bind','searchLib','error','max','log','user','pPostLoadGeneric','map','document','<i\x20class=\x22','_pDoIndexPlutoniumData','getImporterClassMeta','pGetHomebrewSources','getInternalImageUrl','_isIndexItemBlocklisted','isQuickInsertActive','utils','uppercaseFirst','decompressIndex','getPredefinedFluff','Fluff','TAG_TO_PAGE','sheet','pCacheAndGetHash','2004HoaFHN','\x20entity-icon\x22></i>','_page','isExcluded','FOLDER_TYPE','SOURCE_TYP_BREW','CAT_ID_ADVENTURE','CAT_ID_BOOK','getPropTag','journalLink','join','add','includes','_hash','\x22,\x20\x22','hover','_source','categoryToHoverPage','name','pGetAllContent','1rZYika','Renderer.hover.pCacheAndGet(\x22','Failed\x20to\x20load\x20\x22','init','baseUrl','DataSourceUrl','documentType','_tag','icon','_pGetSources','search/index-foundry.json','isTooManySources','DISPLAY_NAME_TYPE_PLURAL','defineProperty','CAT_ID_SKILLS','entities','_name','filter','padStart','_Importer','baseitem','isStreamerMode','tagline','3998385cIhyXt','constructor','Duplicate\x20UUID:\x20','QuickInsert','getUid','907788yRzXHA','CAT_ID_SENSES','pGetLocalHomebrewSources','get','4544094IUFARp','_isDocumentTypeIgnored','pHasTokenUrl','6167184gRRQgc','URL_TO_HASH_BUILDER','pGetItemsFromHomebrew','_init_doPatch','source','_NO_INDEX_CATS','SOURCE_TYP_BREW_LOCAL','_isEntityBlocklisted','pImportEntry','getImporter','uuid','img','1367555euOZcc','1113oYipYb','MODULE_TITLE','proxy','_uid','pCacheAndGet','EVT_DATA_SUBTYPE__HOVER','pGetWithCache','isFiltered','item'];_0x4b84=function(){return _0x448885;};return _0x4b84();}import{UtilCompat}from'./UtilCompat.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{ChooseImporter}from'./ChooseImporter.js';import{UtilEvents}from'./UtilEvents.js';import{LGT}from'./Util.js';import{Vetools}from'./Vetools.js';import{UtilDataSource}from'./UtilDataSource.js';import{UtilWorldDataSourceSelector}from'./UtilWorldDataSourceSelector.js';import{UtilGameSettings}from'./UtilGameSettings.js';import{UtilDataConverter}from'./UtilDataConverter.js';class Patcher_QuickInsert{static[_0x273265(0x13f)](){const _0x2e9bd3=_0x273265;if(!UtilCompat[_0x2e9bd3(0x191)]())return;this[_0x2e9bd3(0x162)]();}static[_0x273265(0x162)](){const _0x2bcb67=_0x273265;let _0x4c4821=null;Object[_0x2bcb67(0x149)](globalThis[_0x2bcb67(0x156)],'searchLib',{'get'(){return _0x4c4821;},'set'(_0x139537){const _0x4e015f=_0x2bcb67,_0xb24078=_0x139537['indexCompendiums'][_0x4e015f(0x182)](_0x139537);_0x139537[_0x4e015f(0x17e)]=async function(..._0x28b38f){const _0x323b28=await _0xb24078(..._0x28b38f);return await Patcher_QuickInsert['_pDoIndexPlutoniumData'](),_0x323b28;},_0x4c4821=_0x139537;}});}static [_0x273265(0x164)]=new Set([Parser[_0x273265(0x14a)],Parser[_0x273265(0x159)],Parser[_0x273265(0x12e)],Parser[_0x273265(0x12f)]]);static async[_0x273265(0x18c)](){const _0x3f8807=_0x273265,_0x3ef4b8=Omnidexer[_0x3f8807(0x194)](await Vetools[_0x3f8807(0x172)](Renderer[_0x3f8807(0x15b)]()[_0x3f8807(0x140)]+_0x3f8807(0x146))),_0xc50621=UtilGameSettings['getSafe'](UtilCompat['MODULE_QUICK_INSERT'],_0x3f8807(0x175)),_0x560f04=Config['get']('integrationQuickInsert',_0x3f8807(0x17d)),_0x3b98de=Config[_0x3f8807(0x15b)]('integrationQuickInsert',_0x3f8807(0x17a)),_0x3315e5=new Set();let _0x5af658=0x0;for(const _0x30a0e9 of _0x3ef4b8){if(!_0x30a0e9['h'])continue;if(Patcher_QuickInsert['_NO_INDEX_CATS'][_0x3f8807(0x179)](_0x30a0e9['c']))continue;const _0xd22680=UrlUtil[_0x3f8807(0x139)](_0x30a0e9['c']);if(!_0xd22680)continue;if(_0x3b98de[_0xd22680])continue;const _0x73c280=ChooseImporter[_0x3f8807(0x18d)](_0x30a0e9['t']);if(!_0x73c280)continue;if(_0x560f04&&SourceUtil['isNonstandardSource'](_0x30a0e9['s']))continue;if(await this[_0x3f8807(0x190)](_0x30a0e9))continue;const {Class:_0x2043e6}=_0x73c280;if(this[_0x3f8807(0x15d)]({'quickInsertIndexingDisabled':_0xc50621,'Importer':_0x2043e6}))continue;const _0x803c9a=new PlutoniumSearchItem({'id':_0x30a0e9['id'],'name':_0x30a0e9['n'],'hash':_0x30a0e9['u'],'page':_0xd22680,'source':_0x30a0e9['s'],'tag':_0x30a0e9['t'],'uid':_0x30a0e9['uu'],'img':Vetools[_0x3f8807(0x18f)](_0x30a0e9['m'],{'isSkipEncode':!![]}),'Importer':_0x2043e6});_0x5af658=Math[_0x3f8807(0x185)](_0x30a0e9['id'],_0x5af658);if(_0x3315e5[_0x3f8807(0x179)](_0x803c9a[_0x3f8807(0x169)])){console[_0x3f8807(0x184)]('Duplicate\x20UUID:\x20'+_0x803c9a['uuid']);continue;}_0x3315e5[_0x3f8807(0x133)](_0x803c9a[_0x3f8807(0x169)]),QuickInsert[_0x3f8807(0x183)][_0x3f8807(0x17b)](_0x803c9a);}if(!UtilWorldDataSourceSelector['isSourceSelectionActive']())return;const _0x5be5d7=await this[_0x3f8807(0x145)]();if(UtilDataSource[_0x3f8807(0x147)]({'cntSources':_0x5be5d7[_0x3f8807(0x180)]})){console[_0x3f8807(0x186)](...LGT,'Skipped\x20loading\x20homebrewâ€”too\x20many\x20sources\x20selected!\x20Increase\x20the\x20\x22Auto-Selected\x20Source\x20Count\x20Warning\x20Threshold\x22\x20Data\x20Sources\x20Config\x20option,\x20or\x20reduce\x20the\x20number\x20of\x20sources\x20auto-selected\x20by\x20the\x20\x22Force\x20Select\x20All\x20for\x20...\x22\x20Data\x20Sources\x20Config\x20Option.');return;}const _0x1737a1=await UtilDataSource[_0x3f8807(0x13b)]({'sources':_0x5be5d7,'isAutoSelectAll':!![]});if(!_0x1737a1)return null;for(const [_0x47fd62,_0x5356ab]of Object[_0x3f8807(0x176)](_0x1737a1['dedupedAllContentMerged'])){if(!(_0x5356ab instanceof Array))continue;if(!UrlUtil[_0x3f8807(0x160)][_0x47fd62])continue;const _0x19e858=Parser[_0x3f8807(0x130)](_0x47fd62),_0xd021fc=ChooseImporter[_0x3f8807(0x18d)](_0x19e858);if(!_0xd021fc)continue;const {Class:_0x27dbe0}=_0xd021fc;if(this[_0x3f8807(0x15d)]({'quickInsertIndexingDisabled':_0xc50621,'Importer':_0x27dbe0}))continue;const _0x1fe8b6=Renderer[_0x3f8807(0x137)][_0x3f8807(0x197)][_0x19e858];if(!_0x1fe8b6)continue;for(const _0x44cb46 of _0x5356ab){if(this[_0x3f8807(0x166)]({'prop':_0x47fd62,'ent':_0x44cb46}))continue;const _0x40585e=new PlutoniumSearchItem({'id':++_0x5af658,'name':_0x44cb46[_0x3f8807(0x13a)],'hash':UrlUtil[_0x3f8807(0x160)][_0x47fd62](_0x44cb46),'page':_0x1fe8b6,'source':_0x44cb46[_0x3f8807(0x163)],'tag':_0x19e858,'uid':DataUtil[_0x3f8807(0x16e)][_0x3f8807(0x157)](_0x47fd62,_0x44cb46),'img':await this[_0x3f8807(0x181)]({'prop':_0x47fd62,'ent':_0x44cb46}),'Importer':_0x27dbe0});if(_0x3315e5[_0x3f8807(0x179)](_0x40585e['uuid'])){console[_0x3f8807(0x184)](_0x3f8807(0x155)+_0x40585e[_0x3f8807(0x169)]);continue;}_0x3315e5['add'](_0x40585e[_0x3f8807(0x169)]),QuickInsert['searchLib']['addItem'](_0x40585e);}}}static async['_isIndexItemBlocklisted'](_0x36d7a6){const _0x463e7f=_0x273265,_0x78832c=Parser['pageCategoryToProp'](_0x36d7a6['c']);if(_0x78832c!==_0x463e7f(0x174))return ExcludeUtil[_0x463e7f(0x12b)](_0x36d7a6['u'],_0x78832c,_0x36d7a6['s'],{'isNoCount':!![]});const _0x3a9eda=await Renderer[_0x463e7f(0x137)][_0x463e7f(0x199)](UrlUtil['PG_ITEMS'],_0x36d7a6['u']);return Renderer[_0x463e7f(0x174)][_0x463e7f(0x12b)](_0x3a9eda,{'hash':_0x36d7a6['u']});}static['_isEntityBlocklisted']({prop:_0x43dcce,ent:_0x489d9f}){const _0x2d61bc=_0x273265,_0x158aa0=UrlUtil['URL_TO_HASH_BUILDER'][_0x43dcce](_0x489d9f);if(_0x43dcce!=='item')return ExcludeUtil[_0x2d61bc(0x12b)](_0x158aa0,_0x43dcce,_0x489d9f[_0x2d61bc(0x163)],{'isNoCount':!![]});return Renderer[_0x2d61bc(0x174)][_0x2d61bc(0x12b)](_0x489d9f,{'hash':_0x158aa0});}static[_0x273265(0x15d)]({quickInsertIndexingDisabled:_0x127be0,Importer:_0x52822a}){const _0x489eb5=_0x273265;return _0x127be0?.[_0x489eb5(0x14b)]?.[_0x52822a[_0x489eb5(0x12c)]]?.[_0x489eb5(0x134)]&&_0x127be0[_0x489eb5(0x14b)][_0x52822a[_0x489eb5(0x12c)]][_0x489eb5(0x134)](game[_0x489eb5(0x187)]?.['role']);}static async[_0x273265(0x181)]({prop:_0x296041,ent:_0x147e7e}){const _0x45ac88=_0x273265;if(await Vetools[_0x45ac88(0x15e)](_0x296041,_0x147e7e,{'isSilent':!![]}))return Vetools['pGetTokenUrl'](_0x296041,_0x147e7e);const _0x3f138f=Renderer[_0x45ac88(0x192)][_0x45ac88(0x195)](_0x147e7e,_0x296041+_0x45ac88(0x196));return Vetools['pGetImageUrlFromFluff'](_0x3f138f);}static async['_pGetSources'](){const _0x11f5dd=_0x273265;return[...(await Vetools[_0x11f5dd(0x15a)]('*'))[_0x11f5dd(0x189)](({name:_0x367f73,url:_0x5851f4})=>new UtilDataSource[(_0x11f5dd(0x141))](_0x367f73,_0x5851f4,{'pPostLoad':this['_pPostLoad']['bind'](this,{'isVetools':![]}),'filterTypes':[UtilDataSource[_0x11f5dd(0x12d)],UtilDataSource[_0x11f5dd(0x165)]]})),...(await Vetools[_0x11f5dd(0x18e)]('*'))[_0x11f5dd(0x189)](({name:_0x1b9383,url:_0x4024a6})=>new UtilDataSource['DataSourceUrl'](_0x1b9383,_0x4024a6,{'pPostLoad':this['_pPostLoad'][_0x11f5dd(0x182)](this,{'isVetools':![]}),'filterTypes':[UtilDataSource[_0x11f5dd(0x12d)]]}))][_0x11f5dd(0x14d)](_0x16af47=>!UtilWorldDataSourceSelector[_0x11f5dd(0x173)](_0x16af47));}static async['_pPostLoad']({isVetools:_0x348e8a},_0x28b7df){const _0x2a5f3d=_0x273265;return _0x28b7df=await UtilDataSource[_0x2a5f3d(0x188)]({'isVetools':_0x348e8a},_0x28b7df),_0x28b7df[_0x2a5f3d(0x174)]=await Renderer['item'][_0x2a5f3d(0x161)](_0x28b7df),delete _0x28b7df['magicvariant'],delete _0x28b7df[_0x2a5f3d(0x150)],delete _0x28b7df['itemProperty'],delete _0x28b7df[_0x2a5f3d(0x17f)],_0x28b7df;}}class PlutoniumSearchItem{constructor({id:_0x5db12d,name:_0x3a02ea,hash:_0x1f9b62,page:_0x1558c1,source:_0x25e340,tag:_0x28844f,uid:_0x3519f4,Importer:_0x282d6c,img:_0x478642}){const _0x455de8=_0x273265;this['id']=(''+_0x5db12d)[_0x455de8(0x14e)](0x10,'0'),this[_0x455de8(0x13a)]=_0x3a02ea,this[_0x455de8(0x142)]=_0x282d6c['FOLDER_TYPE'],this[_0x455de8(0x16a)]=_0x478642,this['_uid']=_0x3519f4,this[_0x455de8(0x14c)]=_0x3a02ea,this[_0x455de8(0x135)]=_0x1f9b62,this[_0x455de8(0x19c)]=_0x1558c1,this[_0x455de8(0x138)]=_0x25e340,this[_0x455de8(0x143)]=_0x28844f,this[_0x455de8(0x14f)]=_0x282d6c;}get['dragData'](){const _0x4e9b2e=_0x273265;return{'type':this[_0x4e9b2e(0x142)],'subType':UtilEvents[_0x4e9b2e(0x171)],'page':this[_0x4e9b2e(0x19c)],'source':this[_0x4e9b2e(0x138)],'hash':this[_0x4e9b2e(0x135)],'originalText':this[_0x4e9b2e(0x143)]+'['+this['_uid'][_0x4e9b2e(0x177)]('|')[_0x4e9b2e(0x189)]((_0x574fd2,_0xf695f5)=>_0xf695f5!==0x0?_0x574fd2:_0x574fd2[_0x4e9b2e(0x193)]())[_0x4e9b2e(0x132)]('|')+']'};}get['uuid'](){const _0x5ce12b=_0x273265;return'@'+this[_0x5ce12b(0x143)]+'['+this[_0x5ce12b(0x16f)]+'|'+this['_name']+']';}get[_0x273265(0x144)](){const _0x4dd0d7=_0x273265;return _0x4dd0d7(0x18b)+CONFIG[this[_0x4dd0d7(0x142)]]['sidebarIcon']+_0x4dd0d7(0x19b);}get[_0x273265(0x131)](){const _0x5c0f68=_0x273265;return'@'+this[_0x5c0f68(0x143)]+'['+this[_0x5c0f68(0x16f)]+']';}get['script'](){const _0x3edcc1=_0x273265;return _0x3edcc1(0x13d)+this['_page']+_0x3edcc1(0x136)+this[_0x3edcc1(0x138)]+_0x3edcc1(0x136)+this[_0x3edcc1(0x135)]+'\x22)';}get[_0x273265(0x152)](){const _0x2dca73=_0x273265;return this[_0x2dca73(0x14f)][_0x2dca73(0x148)]+'\x20('+(Config[_0x2dca73(0x15b)]('ui',_0x2dca73(0x151))?SharedConsts['MODULE_TITLE_FAKE']:SharedConsts[_0x2dca73(0x16d)])+')';}async['show'](){const _0x22c495=_0x273265;(await this[_0x22c495(0x15b)]())?.[_0x22c495(0x198)]?.['render'](!![]);}async[_0x273265(0x15b)](){const _0x51b67a=_0x273265,_0x3749dd=await Renderer[_0x51b67a(0x137)][_0x51b67a(0x170)](this[_0x51b67a(0x19c)],this[_0x51b67a(0x138)],this[_0x51b67a(0x135)]);if(!_0x3749dd)return console[_0x51b67a(0x184)](...LGT,_0x51b67a(0x13e)+this[_0x51b67a(0x135)]+'\x22\x20for\x20page\x20\x22'+this[_0x51b67a(0x19c)]+'\x22!'),null;const _0x13f55f=ChooseImporter[_0x51b67a(0x168)](this[_0x51b67a(0x143)])||ChooseImporter['getImporter'](this[_0x51b67a(0x19c)]),_0x333bed=await _0x13f55f[_0x51b67a(0x167)](_0x3749dd,{'isTemp':!![],'defaultOwnership':UtilDataConverter[_0x51b67a(0x17c)]({'documentType':_0x13f55f[_0x51b67a(0x154)][_0x51b67a(0x12c)]})});return(_0x333bed['imported']||[])[_0x51b67a(0x189)](_0x6439a1=>_0x6439a1[_0x51b67a(0x18a)])['filter'](Boolean)[0x0];}}export{Patcher_QuickInsert};