const _0x4675c3=_0x42d8;(function(_0x502007,_0x5998e9){const _0x492313=_0x42d8,_0x1848f2=_0x502007();while(!![]){try{const _0x583007=parseInt(_0x492313(0xf4))/0x1*(-parseInt(_0x492313(0xfa))/0x2)+parseInt(_0x492313(0x128))/0x3+-parseInt(_0x492313(0x108))/0x4+-parseInt(_0x492313(0xdd))/0x5+-parseInt(_0x492313(0xec))/0x6+parseInt(_0x492313(0x114))/0x7*(parseInt(_0x492313(0xcd))/0x8)+parseInt(_0x492313(0x104))/0x9;if(_0x583007===_0x5998e9)break;else _0x1848f2['push'](_0x1848f2['shift']());}catch(_0x2dbb0d){_0x1848f2['push'](_0x1848f2['shift']());}}}(_0x5602,0x3f973));import{UtilActiveEffects}from'./UtilActiveEffects.js';import{UtilCompat}from'./UtilCompat.js';function _0x42d8(_0x34a68b,_0x2596a7){const _0x560276=_0x5602();return _0x42d8=function(_0x42d881,_0x493055){_0x42d881=_0x42d881-0xc8;let _0x2af64d=_0x560276[_0x42d881];return _0x2af64d;},_0x42d8(_0x34a68b,_0x2596a7);}import{UtilGameSettings}from'./UtilGameSettings.js';class CreatureConditionInflictedConverter{static[_0x4675c3(0x106)](_0x22e729){const _0x57a9cc=_0x4675c3,_0x4b7ef6=new Set();return this['_CONDITION_INFLICTED_MATCHERS'][_0x57a9cc(0x107)](_0x361720=>_0x22e729[_0x57a9cc(0x10f)](_0x361720,(..._0x5a1dfe)=>{const _0x38eb16=_0x57a9cc;_0x4b7ef6[_0x38eb16(0x11d)](_0x5a1dfe[0x1]);if(_0x5a1dfe[0x2])_0x5a1dfe[0x2][_0x38eb16(0x10f)](/{@condition ([^}]+)}/g,(..._0x402bd2)=>_0x4b7ef6[_0x38eb16(0x11d)](_0x402bd2[0x1]));if(_0x5a1dfe[0x3])_0x5a1dfe[0x3][_0x38eb16(0x10f)](/{@condition ([^}]+)}/g,(..._0x27a292)=>_0x4b7ef6['add'](_0x27a292[0x1]));})),[..._0x4b7ef6][_0x57a9cc(0xf6)](SortUtil['ascSortLower']);}}const __TGT='(?:target|wielder)';CreatureConditionInflictedConverter['_CONDITION_INFLICTED_MATCHERS']=[_0x4675c3(0xd1),_0x4675c3(0xf2),_0x4675c3(0xff),_0x4675c3(0xe7),_0x4675c3(0xd6)+__TGT+_0x4675c3(0xf3),_0x4675c3(0x125),_0x4675c3(0xe0),_0x4675c3(0xe8),'(?<!if\x20)the[^.!?]+?'+__TGT+_0x4675c3(0xf5),_0x4675c3(0x131)+__TGT+_0x4675c3(0xee),_0x4675c3(0x132),'saving\x20throw[^.!?]+?or\x20[^.!?]+?\x20and\x20remain\x20{@condition\x20([^}]+)}','saving\x20throw[^.!?]+?or\x20be\x20[^.!?]+?\x20and\x20land\x20{@condition\x20(prone)}',_0x4675c3(0x103),_0x4675c3(0xf0),'the\x20'+__TGT+_0x4675c3(0xe2),_0x4675c3(0x109)+__TGT+_0x4675c3(0x116),'on\x20a\x20failure[^.!?]+?'+__TGT+_0x4675c3(0xe1),'a[^.!?]+?(?:creature|enemy)[^.!?]+?to\x20the[^.!?]+?is\x20(?:also\x20)?{@condition\x20([^}]+)}','(?:creature|enemy)\x20gains?\x20\x5cw+\x20levels?\x20of\x20{@condition\x20(exhaustion)}',_0x4675c3(0xf9),_0x4675c3(0x122)+__TGT+_0x4675c3(0x102),_0x4675c3(0xd7),_0x4675c3(0x12f)+__TGT+_0x4675c3(0x10c),__TGT+'\x5c.\x20[^.!?]+?damage[^.!?]+?and[^.!?]+?'+__TGT+_0x4675c3(0x120),_0x4675c3(0xc8)+__TGT+'\x20[^.!?]+?\x5c.\x20[^.!?]+?is\x20also\x20{@condition\x20([^}]+)}',_0x4675c3(0xd9)+__TGT+_0x4675c3(0xdc),_0x4675c3(0x135),'creature\x20that\x20fails\x20the\x20save[^.!?]+?{@condition\x20([^}]+)}',_0x4675c3(0xfd)+__TGT+_0x4675c3(0x12a),_0x4675c3(0xca)+__TGT+_0x4675c3(0x12c),__TGT+'\x20must\x20succeed[^.!?]+?saving\x20throw[^.!?]+?{@condition\x20([^}]+)}',_0x4675c3(0x11a),_0x4675c3(0x12b),_0x4675c3(0x11c),'if\x20the\x20(?:'+__TGT+_0x4675c3(0x112),_0x4675c3(0xf7)+__TGT+_0x4675c3(0x10e),_0x4675c3(0x126),{'re':_0x4675c3(0x134),'flags':'g'},'succeed\x5cb[^.!?]+\x5cbsaving\x20throw\x5cb[^.!?]+\x5c.\x20(?:It|The\x20(?:creature|target))\x20is\x20{@condition\x20([^}]+)}'][_0x4675c3(0xf1)](_0x549d74=>typeof _0x549d74===_0x4675c3(0xfe)?_0x549d74:{'re':_0x549d74,'flags':'gi'})[_0x4675c3(0xf1)](({re:_0x20e7d3,flags:_0x4c7e49})=>new RegExp(_0x20e7d3+_0x4675c3(0x115),_0x4c7e49));class UtilAutomation{static [_0x4675c3(0xcf)]=null;static[_0x4675c3(0x105)]({entry:_0x32d8f4,img:_0x2ffb01}){const _0x645805=_0x4675c3;return UtilActiveEffects[_0x645805(0x12d)]({'label':_0x32d8f4[_0x645805(0xdb)],'icon':_0x2ffb01,'disabled':![],'transfer':![],'key':_0x645805(0xfc),'value':_0x645805(0xd4),'mode':CONST[_0x645805(0x124)][_0x645805(0xd0)],'priority':UtilActiveEffects['PRIORITY_BASE'],'flags':{[UtilCompat['MODULE_DAE']]:{'selfTarget':!![]}}});}static[_0x4675c3(0xeb)]({entry:_0x4d0570,img:_0x3c87fe,entity:_0x112b14}){const _0x5b283a=_0x4675c3;UtilAutomation[_0x5b283a(0xcf)]=UtilAutomation[_0x5b283a(0xcf)]||MiscUtil[_0x5b283a(0x129)]({'keyBlocklist':MiscUtil[_0x5b283a(0xe3)],'isNoModification':!![],'isBreakOnReturn':!![]});const _0x2d4244=new Set();UtilAutomation[_0x5b283a(0xcf)]['walk'](_0x4d0570[_0x5b283a(0x110)],{'string':_0x370187=>{const _0x359697=_0x5b283a;CreatureConditionInflictedConverter[_0x359697(0x106)](_0x370187)['forEach'](_0x34df6e=>_0x2d4244['add'](_0x34df6e));}});if(!_0x2d4244['size'])return[];const _0x48d130=[..._0x2d4244][_0x5b283a(0xf6)](SortUtil[_0x5b283a(0x101)]),_0x14fed5=[];let _0x281147=![],_0x784926=![],_0x422579=null;const _0x5aa650=_0x5b4e2b=>{const _0x2c9116=_0x5b283a;if(_0x422579==null)_0x422579={};_0x422579=foundry[_0x2c9116(0x123)][_0x2c9116(0xdf)](_0x422579,_0x5b4e2b);};UtilAutomation[_0x5b283a(0xcf)][_0x5b283a(0x117)](_0x4d0570[_0x5b283a(0x110)],{'string':_0x17876f=>{const _0x45dcc4=_0x5b283a,_0x141588=/\b(?<mode>start|end) of (?:the creature's|its) (?:next )?turn\b/i['exec'](_0x17876f);if(_0x141588){const _0x5134c8=_0x141588[_0x45dcc4(0xef)][_0x45dcc4(0x118)]['toLowerCase']()===_0x45dcc4(0xea)?_0x45dcc4(0x10b):'turnEnd';_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'specialDuration':[_0x5134c8]}}});}const _0x390e93=/\b(?<mode>start|end) of\b[^.!?]+\bnext turn\b/i[_0x45dcc4(0xd2)](_0x17876f);if(_0x390e93){const _0xd5c73e=_0x390e93[_0x45dcc4(0xef)]['mode'][_0x45dcc4(0x111)]()==='start'?_0x45dcc4(0x133):_0x45dcc4(0xde);_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'specialDuration':[_0xd5c73e]}}});}const _0x322171=/\b(?:for|the effect lasts(?: for)?)(?: up to)? (?<amount>\d+) (?<unit>minute|hour|day)s??\b/i[_0x45dcc4(0xd2)](_0x17876f);if(_0x322171){const _0x3cfaed=Number(_0x322171[_0x45dcc4(0xef)][_0x45dcc4(0xed)]),_0x41f268=_0x322171[_0x45dcc4(0xef)][_0x45dcc4(0x130)][_0x45dcc4(0x111)]()===_0x45dcc4(0xe4)?0x18*0x3c*0x3c:_0x322171[_0x45dcc4(0xef)][_0x45dcc4(0x130)][_0x45dcc4(0x111)]()==='hour'?0x3c*0x3c:_0x322171[_0x45dcc4(0xef)][_0x45dcc4(0x130)][_0x45dcc4(0x111)]()==='minute'?0x3c:0x1;_0x5aa650({'durationSeconds':Number(_0x3cfaed)*_0x41f268});}const _0x4c82aa=/\buntil [^.?!]+ attacks(?:, )?(?: or )?(?:casts a spell|it forces a creature to make a saving throw)\b/[_0x45dcc4(0xd2)](_0x17876f);_0x4c82aa&&(_0x784926=![],_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'selfTarget':!![],'specialDuration':[_0x45dcc4(0xd8),_0x45dcc4(0xfb)]}}}));const _0x51e884=/\bbecomes \{@condition invisible} [^.?!]+\bafter it makes an attack roll\b/['exec'](_0x17876f);_0x51e884&&(_0x784926=![],_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'selfTarget':!![],'specialDuration':[_0x45dcc4(0x11e)]}}}));const _0x53b609=new RegExp('\x5cb(?<ability>'+Object['values'](Parser[_0x45dcc4(0x10d)])[_0x45dcc4(0xcb)]('|')+_0x45dcc4(0xe5),'i')['exec'](_0x17876f),_0x14311a=new RegExp(_0x45dcc4(0xf8)+Object[_0x45dcc4(0xd5)](Parser[_0x45dcc4(0x10d)])[_0x45dcc4(0xcb)]('|')+')\x20check')[_0x45dcc4(0xd2)](_0x17876f);if(_0x53b609||_0x14311a){const _0x1aab4a=_0x53b609||_0x14311a,_0xac0dfa=_0x1aab4a[_0x45dcc4(0xef)][_0x45dcc4(0x127)][_0x45dcc4(0x119)](0x0,0x3)[_0x45dcc4(0x111)]();_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'specialDuration':[_0x45dcc4(0x11b)+_0xac0dfa]}}});}const _0x1a6bef=/\buntil [^.?!]+ concentration ends\b/i[_0x45dcc4(0xd2)](_0x17876f);_0x1a6bef&&_0x5aa650({});const _0x258241=/\buntil it finishes a short or long rest\b/i[_0x45dcc4(0xd2)](_0x17876f);_0x258241&&_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'specialDuration':['shortRest',_0x45dcc4(0xe6)]}}});const _0x15c24b=/\bcan remove [^.?!]+ using a short rest\b/i['exec'](_0x17876f);_0x15c24b&&_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'specialDuration':[_0x45dcc4(0x10a)]}}});const _0x37b5b0=/\b(?:until initiative count 20 on the next round|until the next initiative count 20)\b/i[_0x45dcc4(0xd2)](_0x17876f);_0x37b5b0&&_0x5aa650({'flags':{[UtilCompat[_0x45dcc4(0x121)]]:{'specialDuration':['turnEndSource']}}});const _0x4294ad=/\buntil the disease (?:is cured|ends)\b/i[_0x45dcc4(0xd2)](_0x17876f);_0x4294ad&&_0x5aa650({});const _0x46fa88=/\buntil (?:it is removed by the [^.]+? spell or similar magic|magic such as the [^.]+? spell)\b/i['exec'](_0x17876f);_0x46fa88&&_0x5aa650({});const _0x2d539d=/\buntil the [^.!?]+? dies\b/i[_0x45dcc4(0xd2)](_0x17876f);_0x2d539d&&_0x5aa650({});if(_0x422579)return!![];}});if(UtilGameSettings[_0x5b283a(0x12e)]()&&!_0x422579){const _0x604e77=_0x48d130['filter'](_0x280d17=>!['prone',_0x5b283a(0x113),'deafened'][_0x5b283a(0xda)](_0x280d17))[_0x5b283a(0x11f)](_0x37471a=>!(_0x48d130[_0x5b283a(0xda)](_0x5b283a(0x113))&&_0x37471a===_0x5b283a(0xcc)));_0x604e77[_0x5b283a(0xce)]&&console[_0x5b283a(0xe9)](_0x5b283a(0xc9)+_0x4d0570[_0x5b283a(0xdb)]+_0x5b283a(0xd3)+_0x604e77[_0x5b283a(0xcb)]('/')+'\x22\x20for\x20creature\x20\x22'+_0x112b14[_0x5b283a(0xdb)]+'\x22\x20in\x20e.g.\x0a'+_0x4d0570['entries'][0x0]);}return[..._0x48d130[_0x5b283a(0xf1)](_0x130962=>{const _0xf8a3e=_0x5b283a;return UtilActiveEffects['getGenericEffect']({'label':Renderer['stripTags'](_0x4d0570[_0xf8a3e(0xdb)]),'icon':_0x3c87fe,'disabled':_0x281147,'transfer':_0x784926,'key':_0xf8a3e(0xfc),'value':'Convenient\x20Effect:\x20'+_0x130962['toTitleCase'](),'mode':CONST['ACTIVE_EFFECT_MODES'][_0xf8a3e(0xd0)],'priority':UtilActiveEffects[_0xf8a3e(0x100)],..._0x422579});}),..._0x14fed5];}}function _0x5602(){const _0x5c2b33=['the\x20{@condition\x20([^}]+)}\x20creature\x20can\x20repeat\x20the\x20saving\x20throw','add','1Attack','filter','\x20is\x20{@condition\x20([^}]+)}','MODULE_DAE','(?:on\x20a\x20successful\x20save|if\x20the\x20saving\x20throw\x20is\x20successful),\x20(?:the\x20','utils','ACTIVE_EFFECT_MODES','and\x20then\x20be\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','magically\x20(?:become|turn)s?\x20{@condition\x20(invisible)}','ability','157797gDNKFp','getWalker','\x20is\x20a\x20creature[^.!?]+?saving\x20throw[^.!?]*?\x5c.\x20On\x20a\x20failed\x20save[^.!?]+?{@condition\x20([^}]+)}','on\x20a\x20failure,\x20the\x20[^.!?]+?\x20can\x20[^.!?]+?{@condition\x20([^}]+)}','|creature|enemy)\x20[^.!?]+{@condition\x20([^}]+)}','getGenericEffect','isDbg','the\x20(?:','unit','the[^.!?]+?','begins\x20to\x20[^.!?]+?\x20and\x20is\x20{@condition\x20([^}]+)}','turnStartSource','The\x20(?!(?:[^.]+)\x20can\x20sense)(?:[^.]+)\x20is\x20{@condition\x20(invisible)}','(?:creatures|enemies)\x20within\x20\x5cd+\x20feet[^.!?]+must\x20succeed[^.!?]+saving\x20throw\x20or\x20be\x20{@condition\x20([^}]+)}','on\x20a\x20failure[^.!?]+?','No\x20end\x20found\x20for\x20','while\x20{@condition\x20(?:[^}]+)}\x20in\x20this\x20way,\x20an?\x20(?:','join','restrained','15608QWmNaj','length','_WALKER_BOR','CUSTOM','(?:creature|enemy|target)\x20is\x20\x5cw+\x20{@condition\x20([^}]+)}','exec','\x20ending\x20for\x20\x22','Convenient\x20Effect:\x20Concentrating','values','(?:','or\x20take[^.!?]+?damage\x20and\x20(?:becomes?|is|be)\x20{@condition\x20([^}]+)}','1Action','(?:(?:a|the|each)\x20','includes','name','|(?:a|the|each)\x20creature|(?:an|each)\x20enemy)[^.!?]+?takes?[^.!?]+?damage[^.!?]+?and\x20[^.!?]+?\x20{@condition\x20([^}]+)}','2183935mgeqYK','turnEndSource','mergeObject','(?:be|is)\x20knocked\x20(?:\x5cw+\x20)?{@condition\x20(prone|unconscious)}','[^.!?]+?(?:pushed|pulled)[^.!?]+?and\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','\x20is\x20[^.!?]+?\x20and\x20(?:is\x20)?{@condition\x20([^}]+)}\x20while','GENERIC_WALKER_ENTRIES_KEY_BLOCKLIST','day',')\x20check,?(?:\x20(?:ending|escaping)\x20[^.?!]+\x20on\x20a\x20success|\x20and\x20succeeds|\x20[^.?!]*?\x5cb\x20the\x20effect\x20on\x20a\x20success|\x20freeing\x5cb[^.?!]*?\x5cbon\x20a\x20success)\x5cb','longRest','(?:the\x20save|fails)\x20by\x20\x5cd+\x20or\x20more,\x20[^.!?]+?{@condition\x20([^}]+)}','a\x20(?:\x5cw+\x20)?{@condition\x20[^}]+}\x20(?:creature|enemy)\x20is\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','warn','start','getCreatureFeatureEffects','368580QDYJaO','amount','\x20is\x20[^.!?]+?,\x20it\x20is\x20{@condition\x20([^}]+)}(?:\x20\x5c(escape\x20[^\x5c)]+\x5c))?','groups','the\x20engulfed\x20(?:creature|enemy)\x20[^.!?]+?\x20{@condition\x20([^}]+)}','map','(?:creature|enemy|target)\x20becomes\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','|creatures?|humanoid|undead|other\x20creatures|enemy)\x20[^.!?]+?(?:succeed|make|pass)[^.!?]+?saving\x20throw[^.!?]+?or\x20(?:fall|be(?:come)?|is)\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','7601sjOGdf','\x20is\x20[^.!?]*?(?<!that\x20isn\x27t\x20){@condition\x20([^}]+)}','sort','(?<!if\x20the\x20)(?:creature|','\x5cbending\x20the\x20effect\x5cb[^.?!]*?\x5cbwith\x20a\x20successful\x5cb[^.?!]*?\x5cb(?<ability>','(?:saving\x20throw|failed\x20save)[^.!?]+?\x20gains?\x20\x5cw+\x20levels?\x20of\x20{@condition\x20(exhaustion)}','8ltmWrz','1Spell','StatusEffect','if\x20the\x20','object','saving\x20throw\x20(?:by\x20\x5cd+\x20or\x20more,\x20it\x20)?is\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','PRIORITY_BASE','ascSortLower','\x20|(?:a|the\x20)creature\x20|(?:an\x20|the\x20)enemy\x20)[^.!?]*?isn\x27t\x20{@condition\x20([^}]+)}','saving\x20throw[^.!?]+?or\x20be\x20(?:pushed|pulled)\x20[^.!?]+?\x20and\x20(?:\x5cw+\x20)?{@condition\x20([^}]+)}','6199416GdLkBk','_getEffectConcentrating','getConditionMatches','forEach','909704OXPpqX','on\x20a\x20failed\x20save[^.!?]+?the\x20(?:','shortRest','turnStart','|creature|enemy)\x20[^.!?]+?\x20and\x20is\x20{@condition\x20([^}]+)}','ATB_ABV_TO_FULL',')\x20(?:also\x20becomes|is)\x20{@condition\x20([^}]+)}','replace','entries','toLowerCase','|creature)\x20is\x20already\x20{@condition\x20[^}]+},\x20it\x20becomes\x20{@condition\x20([^}]+)}','grappled','987lNfbhc','((?:,\x20{@condition\x20[^}]+})*)(,?\x20(?:and|or)\x20{@condition\x20[^}]+})?','|creature)\x20[^.!?]+?\x20{@condition\x20([^}]+)}','walk','mode','slice','fails\x20the\x20saving\x20throw[^.!?]+?is\x20instead{@condition\x20([^}]+)}','isCheck.'];_0x5602=function(){return _0x5c2b33;};return _0x5602();}export{UtilAutomation};